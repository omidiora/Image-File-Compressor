{"ast":null,"code":"import _regeneratorRuntime from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/omidiora/Desktop/React App image compressor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'bootstrap/dist/css/bootstrap.min.css';import imageCompression from'browser-image-compression';import{Form,Container,Row,Col,Card,Alert,Badge}from'react-bootstrap';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.compressImage=_this.compressImage.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.state={maxSizeMB:1,maxWidthOrHeight:2024,webWorker:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null},mainThread:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null}};return _this;}_createClass(App,[{key:\"handleChange\",value:function handleChange(target){var _this2=this;return function(e){_this2.setState(_defineProperty({},target,e.currentTarget.value));};}},{key:\"onProgress\",value:function onProgress(p,useWebWorker){var targetName=useWebWorker?'webWorker':'mainThread';this.setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},targetName,_objectSpread(_objectSpread({},prevState[targetName]),{},{progress:p})));});}},{key:\"compressImage\",value:function(){var _compressImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,useWebWorker){var _this3=this;var file,targetName,options,output;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=event.target.files[0];console.log('input',file);_context.t0=console;_context.next=5;return imageCompression.getExifOrientation(file);case 5:_context.t1=_context.sent;_context.t0.log.call(_context.t0,'ExifOrientation',_context.t1);targetName=useWebWorker?'webWorker':'mainThread';this.setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},targetName,_objectSpread(_objectSpread({},prevState[targetName]),{},{inputSize:(file.size/1024/1024).toFixed(2),inputUrl:URL.createObjectURL(file)})));});options={maxSizeMB:this.state.maxSizeMB,maxWidthOrHeight:this.state.maxWidthOrHeight,useWebWorker:useWebWorker,onProgress:function onProgress(p){return _this3.onProgress(p,useWebWorker);}};_context.next=12;return imageCompression(file,options);case 12:output=_context.sent;console.log('output',output);this.setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},targetName,_objectSpread(_objectSpread({},prevState[targetName]),{},{outputSize:(output.size/1024/1024).toFixed(2),outputUrl:URL.createObjectURL(output)})));});case 15:case\"end\":return _context.stop();}}},_callee,this);}));function compressImage(_x,_x2){return _compressImage.apply(this,arguments);}return compressImage;}()},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,webWorker=_this$state.webWorker,mainThread=_this$state.mainThread,maxSizeMB=_this$state.maxSizeMB,maxWidthOrHeight=_this$state.maxWidthOrHeight;return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:{span:6,offset:3}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"web-worker\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"mt-4\"},\"Image File Compressor\"),\"  \"),webWorker.progress&&/*#__PURE__*/React.createElement(\"span\",null,webWorker.progress,\" %\"),/*#__PURE__*/React.createElement(Form,{id:\"web-worker\",type:\"file\",accept:\"image/*\",onChange:function onChange(e){return _this4.compressImage(e,true);}},/*#__PURE__*/React.createElement(Form.Group,null,\" \",/*#__PURE__*/React.createElement(Form.File,{id:\"exampleFormControlFile1\",label:\"Example file input\"})))),/*#__PURE__*/React.createElement(\"p\",null,webWorker.inputSize&&/*#__PURE__*/React.createElement(\"span\",null,\" \",/*#__PURE__*/React.createElement(\"b\",null,\"Source image size:\"),\" \",/*#__PURE__*/React.createElement(Badge,{variant:\"primary\"},'',webWorker.inputSize,\" mb \")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),webWorker.outputSize&&/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"b\",null,\" Output image size: \"),\" \",/*#__PURE__*/React.createElement(Badge,{variant:\"primary\"},webWorker.outputSize,\" mb\"),\" \"))),(mainThread.inputUrl||webWorker.inputUrl)&&/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"  \",/*#__PURE__*/React.createElement(Alert,{variant:\"primary\"},\"input preview \")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Alert,{variant:\"danger\"},\"output preview \")))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(Card.Img,{variant:\"bottom\",src:mainThread.inputUrl||webWorker.inputUrl})),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(Card.Img,{variant:\"bottom\",src:mainThread.outputUrl||webWorker.outputUrl}))))))));}}]);return App;}(React.Component);export{App as default};;","map":{"version":3,"sources":["/home/omidiora/Desktop/React App image compressor/src/App.js"],"names":["React","imageCompression","Form","Container","Row","Col","Card","Alert","Badge","App","args","compressImage","bind","handleChange","state","maxSizeMB","maxWidthOrHeight","webWorker","progress","inputSize","outputSize","inputUrl","outputUrl","mainThread","target","e","setState","currentTarget","value","p","useWebWorker","targetName","prevState","event","file","files","console","log","getExifOrientation","size","toFixed","URL","createObjectURL","options","onProgress","output","span","offset","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport imageCompression from 'browser-image-compression';\nimport {Form , Container , Row , Col , Card , Alert , Badge} from 'react-bootstrap'; \n\nexport default class App extends React.Component {\n  constructor (...args) {\n    super(...args)\n    this.compressImage = this.compressImage.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.state = {\n      maxSizeMB: 1,\n      maxWidthOrHeight: 2024,\n      webWorker: {\n        progress: null,\n        inputSize: null,\n        outputSize: null,\n        inputUrl: null,\n        outputUrl: null\n      },\n      mainThread: {\n        progress: null,\n        inputSize: null,\n        outputSize: null,\n        inputUrl: null,\n        outputUrl: null\n      }\n    }\n  }\n\n  handleChange (target) {\n    return (e) => {\n      this.setState({ [target]: e.currentTarget.value })\n    }\n  }\n\n  onProgress (p, useWebWorker) {\n    const targetName = useWebWorker ? 'webWorker' : 'mainThread'\n    this.setState(prevState => ({\n      ...prevState,\n      [targetName]: {\n        ...prevState[targetName],\n        progress: p\n      }\n    }))\n  }\n\n  async compressImage (event, useWebWorker) {\n    const file = event.target.files[0]\n    console.log('input', file)\n    console.log(\n      'ExifOrientation',\n      await imageCompression.getExifOrientation(file)\n    )\n    const targetName = useWebWorker ? 'webWorker' : 'mainThread'\n    this.setState(prevState => ({\n      ...prevState,\n      [targetName]: {\n        ...prevState[targetName],\n        inputSize: (file.size / 1024 / 1024).toFixed(2),\n        inputUrl: URL.createObjectURL(file)\n      }\n    }))\n    var options = {\n      maxSizeMB: this.state.maxSizeMB,\n      maxWidthOrHeight: this.state.maxWidthOrHeight,\n      useWebWorker,\n      onProgress: p => this.onProgress(p, useWebWorker)\n    }\n    const output = await imageCompression(file, options)\n    console.log('output', output)\n    this.setState(prevState => ({\n      ...prevState,\n      [targetName]: {\n        ...prevState[targetName],\n        outputSize: (output.size / 1024 / 1024).toFixed(2),\n        outputUrl: URL.createObjectURL(output)\n      }\n    }))\n  }\n\n  render () {\n    const { webWorker, mainThread, maxSizeMB, maxWidthOrHeight } = this.state\n    return (\n      <Container>\n        <Row>\n        <Col md={{ span: 6, offset: 3 }}>\n\n        <div>\n        \n \n          <label htmlFor=\"web-worker\">\n\n          <p className='text-center'><h1 className='mt-4'>Image File Compressor</h1>  </p>\n            {webWorker.progress && <span>{webWorker.progress} %</span>}\n            \n            <Form id=\"web-worker\"\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={e => this.compressImage(e, true)}>\n            <Form.Group> <Form.File id=\"exampleFormControlFile1\" label=\"Example file input\" />\n              </Form.Group>\n              \n              </Form>\n          \n          </label>\n          <p>\n            {webWorker.inputSize && (\n              <span> <b>Source image size:</b> <Badge variant=\"primary\">{''}{webWorker.inputSize} mb </Badge></span>\n            )}\n            <br></br>\n            <br></br>\n            <br></br>\n            <br></br>\n            {webWorker.outputSize && (\n              <span><b> Output image size: </b> <Badge variant=\"primary\">{webWorker.outputSize} mb</Badge> </span>\n            )}\n          </p>\n        </div>\n       \n        {(mainThread.inputUrl || webWorker.inputUrl) && (\n          <table>\n            <thead>\n            <tr>\n              <td>  <Alert  variant= 'primary'>input preview </Alert></td>\n              <td><Alert  variant= 'danger'>output preview </Alert></td>\n            </tr>\n            </thead>\n            <tbody>\n            <tr>\n            <td> <Card.Img variant=\"bottom\" src={mainThread.inputUrl || webWorker.inputUrl} /></td>\n            <td> <Card.Img variant=\"bottom\" src={mainThread.outputUrl || webWorker.outputUrl}/></td>\n          \n             \n            </tr>\n            </tbody>\n          </table>\n        )}\n        </Col>\n\n      </Row>\n\n  </Container>\n    )\n  }\n};\n"]},"metadata":{},"sourceType":"module"}